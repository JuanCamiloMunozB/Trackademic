<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="'Trackademic | Plan: ' + ${plan.subjectCode}"></title> <!-- Dynamic title -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />
    <link rel="stylesheet" th:href="@{/css/common.css}" />
    <!-- Optional: Link to a specific CSS file for this page -->
    <!-- <link rel="stylesheet" th:href="@{/css/evaluation-plan-detail.css}" /> -->

</head>
<body>
    <header class="py-3 border-bottom bg-white shadow-sm">
        <div class="container d-flex justify-content-between align-items-center">
            <h1 class="h4 text-primary fw-bold mb-0">Trackademic</h1>
            <!-- Button to go back to the Evaluation Plans list -->
            <nav>
                 <a th:href="@{/evaluation-plans/search}" class="btn btn-sm btn-outline-secondary">
                    <i class="bi bi-arrow-left me-1"></i> Back to Plans List
                 </a>
            </nav>
        </div>
    </header>

    <main class="container my-5">

        <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
            <p th:text="${errorMessage}"></p>
        </div>

        <div th:if="${plan}">
             <h2 class="mb-4 fw-bold text-primary text-center" th:text="'Evaluation Plan: ' + ${plan.subjectName} + ' (' + ${plan.subjectCode} + ')'">Evaluation Plan Details</h2>

             <div class="card card-custom mb-4 shadow-sm">
                 <div class="card-header bg-light">
                     <h3 class="h5 mb-0 fw-semibold">Details</h3>
                 </div>
                 <div class="card-body">
                     <div class="row">
                         <div class="col-md-6 mb-3">
                             <p class="fw-semibold mb-1">Subject Code:</p>
                             <p th:text="${plan.subjectCode}"></p>
                         </div>
                         <div class="col-md-6 mb-3">
                             <p class="fw-semibold mb-1">Subject Name:</p>
                             <p th:text="${plan.subjectName}"></p>
                         </div>
                         <div class="col-md-6 mb-3">
                             <p class="fw-semibold mb-1">Group ID:</p>
                             <p th:text="${plan.groupId}"></p>
                         </div>
                         <div class="col-md-6 mb-3">
                             <p class="fw-semibold mb-1">Professor:</p>
                             <p th:text="${plan.professor}"></p>
                         </div>
                         <div class="col-md-6 mb-3">
                              <p class="fw-semibold mb-1">Semester:</p>
                              <p th:text="${plan.semester}"></p>
                         </div>
                         <!-- Add more plan details here as needed -->
                     </div>
                 </div>
             </div>

             <div class="card card-custom mb-4 shadow-sm">
                  <div class="card-header bg-light d-flex justify-content-between align-items-center">
                       <h3 class="h5 mb-0 fw-semibold">Activities</h3>
                       <!-- Optional: Button to add activity -->
                       <!-- <a href="#" class="btn btn-sm btn-success"><i class="bi bi-plus-circle me-1"></i> Add Activity</a> -->
                   </div>
                 <div class="card-body">
                     <div th:if="${plan.activities != null and !plan.activities.empty}">
                         <ul class="list-group list-group-flush">
                             <li th:each="activity : ${plan.activities}" class="list-group-item d-flex justify-content-between align-items-center">
                                 <div>
                                     <span class="fw-semibold" th:text="${activity.name}">Activity Name</span>
                                     <small class="text-muted ms-2">(<span th:text="${activity.percentage}">%</span>% of Final Grade)</small>
                                 </div>
                                 <!-- Optional: Display grade if available -->
                                 <span th:if="${activity.grade != 0}" class="badge bg-primary rounded-pill" th:text="${activity.grade}">Grade</span>
                                 <span th:unless="${activity.grade != 0}" class="badge bg-secondary rounded-pill">Not Graded</span>
                             </li>
                         </ul>
                     </div>
                     <div th:if="${plan.activities == null or plan.activities.empty}">
                         <p class="text-muted">No activities defined for this evaluation plan.</p>
                     </div>
                 </div>
             </div>

             <!-- Optional: Add comments section -->
             <!-- You would need a CommentRepository method like findByEvaluationPlanId and a service method to fetch comments -->
             <!-- <div class="card card-custom mb-4 shadow-sm">
                  <div class="card-header bg-light">
                       <h3 class="h5 mb-0 fw-semibold">Comments</h3>
                   </div>
                   <div class="card-body">
                        ... display comments here ...
                   </div>
             </div> -->


             <!-- Optional: Buttons for editing/deleting -->
             <!-- <div class="mt-4 text-center">
                 <a th:href="@{/evaluation-plans/edit/{id}(id=${plan.id})}" class="btn btn-warning me-2"><i class="bi bi-pencil-square me-1"></i> Edit Plan</a>
                 <button type="button" class="btn btn-danger" onclick="confirmDelete('${plan.id}')"><i class="bi bi-trash me-1"></i> Delete Plan</button>
             </div> -->

        </div>

    </main>

     <footer class="py-4 mt-auto bg-light text-center text-muted">
        Â© 2025 Trackademic. Todos los derechos reservados.
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <!-- Optional: JavaScript for delete confirmation -->
    <!-- <script>
        function confirmDelete(planId) {
            if (confirm("Are you sure you want to delete this evaluation plan?")) {
                 // Redirect to a delete endpoint or submit a form
                 window.location.href = '/evaluation-plans/delete/' + planId;
            }
        }
    </script> -->

</body>
</html>